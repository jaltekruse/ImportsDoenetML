import{z as H,M as L,u as G,r as w,R as O,e as T,j as e,a as U,F as x,b as F,c as S,d as I,f as N}from"./index-2b5c64d9.js";const o=H.button`
  position: relative;
  /* width: 24px; */
  height: 24px;
  color: #ffffff;
  background-color: var(--mainBlue);
  display: inline-block;
  text-align: center;
  padding: 2px;
  z-index: 0;
  /* border: var(--mainBorder); */
  border: none;
  border-radius: var(--mainBorderRadius);
  margin: 0px 4px 4px 0px;

  &:hover {
    background-color: var(--lightBlue);
    color: black;
  }
`,z=L.memo(function V(E){let{name:$,id:l,SVs:t,actions:g,children:M,sourceOfUpdate:K,ignoreUpdate:R,rendererName:P,callAction:f}=G(E);V.baseStateVariable="selectedIndices";const[b,_]=w.useState(t.selectedIndices),D=O(T(P));let y=w.useRef(null);!R&&y.current!==t.selectedIndices?(_(t.selectedIndices),y.current=t.selectedIndices):y.current=null;let d="unvalidated";(t.valueHasBeenValidated||t.numAttemptsLeft<1)&&(t.creditAchieved===1?d="correct":t.creditAchieved===0?d="incorrect":d="partialcorrect");function A(i){let n=[];if(t.inline)i.target.value&&(n=Array.from(i.target.selectedOptions,r=>Number(r.value)));else if(t.selectMultiple){n=[...b];let r=Number(i.target.value);if(i.target.checked)n.includes(r)||(n.push(r),n.sort((c,a)=>c-a));else{let c=n.indexOf(r);c!==-1&&n.splice(c,1)}}else n=[Number(i.target.value)];(b.length!==n.length||b.some((r,c)=>r!=n[c]))&&(_(n),y.current=t.selectedIndices,D(r=>{let c={...r};return c.ignoreUpdate=!0,c}),f({action:g.updateSelectedIndices,args:{selectedIndices:n},baseVariableValue:n}))}if(t.hidden)return null;let h=t.disabled,C=t.label;if(t.labelHasLatex&&(C=e.jsx(U,{hideUntilTypeset:"first",inline:!0,dynamic:!0,children:C})),t.inline){let i={cursor:"pointer",padding:"1px 6px 1px 6px",width:"24px"},n=null;if(t.includeCheckWork&&!t.suppressCheckwork){if(d==="unvalidated")h&&(i.backgroundColor=getComputedStyle(document.documentElement).getPropertyValue("--mainGray")),n=e.jsx(o,{id:l+"_submit",disabled:h,tabIndex:"0",style:i,onClick:()=>f({action:g.submitAnswer}),onKeyPress:u=>{u.key==="Enter"&&f({action:g.submitAnswer})},children:e.jsx(x,{style:{},icon:F,transform:{rotate:90}})});else if(t.showCorrectness)if(d==="correct")i.backgroundColor=getComputedStyle(document.documentElement).getPropertyValue("--mainGreen"),n=e.jsx(o,{id:l+"_correct",style:i,children:e.jsx(x,{icon:S})});else if(d==="partialcorrect"){let u=`${Math.round(t.creditAchieved*100)} %`;i.width="44px",i.backgroundColor="#efab34",n=e.jsx(o,{id:l+"_partial",style:i,children:u})}else i.backgroundColor=getComputedStyle(document.documentElement).getPropertyValue("--mainRed"),n=e.jsx(o,{id:l+"_incorrect",style:i,children:e.jsx(x,{icon:I})});else i.backgroundColor="rgb(74, 3, 217)",i.padding="1px 8px 1px 4px",n=e.jsx(o,{id:l+"_saved",style:i,children:e.jsx(x,{icon:N})});t.numAttemptsLeft<0?n=e.jsxs(e.Fragment,{children:[n,e.jsx("span",{children:"(no attempts remaining)"})]}):t.numAttemptsLeft==1?n=e.jsxs(e.Fragment,{children:[n,e.jsx("span",{children:"(1 attempt remaining)"})]}):Number.isFinite(t.numAttemptsLeft)&&(n=e.jsxs(e.Fragment,{children:[n,e.jsxs("span",{children:["(",t.numAttemptsLeft," attempts remaining)"]})]}))}let r=t,c=t.choiceTexts.map(function(u,m){return r.choicesHidden[m]?null:e.jsx("option",{value:m+1,disabled:r.choicesDisabled[m],children:u},m+1)}),a=b;return a===void 0?a="":t.selectMultiple||(a=a[0],a===void 0&&(a="")),e.jsxs(L.Fragment,{children:[e.jsx("a",{name:l}),e.jsxs("label",{style:{display:"inline-flex",maxWidth:"100%"},id:l+"-label",children:[C,e.jsxs("select",{className:"custom-select",id:l,onChange:A,value:a,disabled:h,multiple:t.selectMultiple,children:[e.jsx("option",{hidden:!0,value:"",children:t.placeHolder}),c]})]}),n]})}else{let i={height:"24px",display:"inline-block",padding:"1px 6px 1px 6px",cursor:"pointer"},n=null;if(t.includeCheckWork&&!t.suppressCheckwork)if(d==="unvalidated"){let p=t.submitLabel;t.showCorrectness||(p=t.submitLabelNoCorrectness),h&&(i.backgroundColor=getComputedStyle(document.documentElement).getPropertyValue("--mainGray")),n=e.jsxs(o,{id:l+"_submit",tabIndex:"0",disabled:h,style:i,onClick:()=>f({action:g.submitAnswer}),onKeyPress:s=>{s.key==="Enter"&&f({action:g.submitAnswer})},children:[e.jsx(x,{style:{},icon:F,transform:{rotate:90}})," ",p]})}else if(t.showCorrectness){if(d==="correct")i.backgroundColor=getComputedStyle(document.documentElement).getPropertyValue("--mainGreen"),n=e.jsxs(o,{id:l+"_correct",style:i,children:[e.jsx(x,{icon:S}),"  Correct"]});else if(d==="incorrect")i.backgroundColor=getComputedStyle(document.documentElement).getPropertyValue("--mainRed"),n=e.jsxs(o,{id:l+"_incorrect",style:i,children:[e.jsx(x,{icon:I}),"  Incorrect"]});else if(d==="partialcorrect"){i.backgroundColor="#efab34";let p=`${Math.round(t.creditAchieved*100)}% Correct`;n=e.jsx(o,{id:l+"_partial",style:i,children:p})}}else i.backgroundColor="rgb(74, 3, 217)",n=e.jsxs(o,{id:l+"_saved",style:i,children:[e.jsx(x,{icon:N}),"  Response Saved"]});t.numAttemptsLeft<0?n=e.jsxs(e.Fragment,{children:[n,e.jsx("span",{children:"(no attempts remaining)"})]}):t.numAttemptsLeft==1?n=e.jsxs(e.Fragment,{children:[n,e.jsx("span",{children:"(1 attempt remaining)"})]}):Number.isFinite(t.numAttemptsLeft)&&(n=e.jsxs(e.Fragment,{children:[n,e.jsxs("span",{children:["(",t.numAttemptsLeft," attempts remaining)"]})]}));let r=l,c={listStyleType:"none"},a=r+"_choice",u="radio";t.selectMultiple&&(u="checkbox");let m=t,B=t.choiceOrder.map(p=>M[p-1]).map(function(p,s){if(m.choicesHidden[s])return null;if(u=="radio"){let v=h||m.choicesDisabled[s],j="radio-container",k="radio-checkmark";return v&&(j+=" radio-container-disabled",k+=" radio-checkmark-disabled"),e.jsxs("label",{className:j,children:[e.jsx("input",{type:"radio",id:a+(s+1)+"_input",name:r,value:s+1,checked:b.includes(s+1),onChange:A,disabled:v}),e.jsx("span",{className:k}),e.jsx("label",{htmlFor:a+(s+1)+"_input",style:{marginLeft:"2px"},children:p})]},r+"_choice"+(s+1))}else if(u=="checkbox"){let v=h||m.choicesDisabled[s],j="checkbox-container",k="checkbox-checkmark";return v&&(j+=" checkbox-container-disabled",k+=" checkbox-checkmark-disabled"),e.jsxs("label",{className:j,children:[e.jsx("input",{type:"checkbox",id:a+(s+1)+"_input",name:r,value:s+1,checked:b.includes(s+1),onChange:A,disabled:h||m.choicesDisabled[s]}),e.jsx("span",{className:k}),e.jsx("label",{htmlFor:a+(s+1)+"_input",style:{marginLeft:"2px"},children:p})]},r+"_choice"+(s+1))}});return e.jsxs("div",{id:r+"-label",children:[C,e.jsxs("ol",{id:r,style:c,children:[e.jsx("a",{name:l}),B]}),n]})}});export{z as default};
