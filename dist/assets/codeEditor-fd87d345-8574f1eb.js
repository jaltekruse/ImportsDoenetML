import{M as L,u as E,R as F,e as _,r as u,j as i,l as D,V as I}from"./index-2b5c64d9.js";import{i as d}from"./css-ab4d83ca-d016d639.js";const X=L.memo(function j(y){let{name:M,id:h,SVs:e,children:m,actions:l,ignoreUpdate:R,rendererName:v,callAction:s}=E(y);j.baseStateVariable="immediateValue";const w=F(_(v));let r=u.useRef(e.immediateValue),a=u.useRef(null),W=u.useRef(null),b=u.useRef(e.immediateValue),S={...e.height},x={...e.height};e.showResults&&e.resultsLocation==="bottom"&&(x.size*=1-e.viewerRatio);let z=n=>{s({action:l.recordVisibilityChange,args:{isVisible:n}})};if(u.useEffect(()=>()=>{s({action:l.recordVisibilityChange,args:{isVisible:!1}}),a.current!==null&&(clearTimeout(a.current),s({action:l.updateValue,baseVariableValue:r.current}))},[]),e.hidden)return null;const g=h+"_editor";!R&&e.immediateValue!==r.current&&(r.current=e.immediateValue,b.current=e.immediateValue);let o=null,C=e.width,V=e.width,T={width:d(C),height:d(x),maxWidth:"100%",padding:"0px",overflowX:"hidden",overflowY:"scroll"};e.showResults&&(e.resultsLocation==="bottom"?o=i.jsxs(i.Fragment,{children:[i.jsx("hr",{style:{width:d(V),maxWidth:"100%"}}),i.jsx("div",{children:m})]}):o=i.jsx("div",{children:m}));let c={...x};c.size/=2,c=d(c);let p=i.jsx("div",{id:g,style:T,children:i.jsx(D,{editorRef:W,setInternalValueTo:b.current,readOnly:e.disabled,onBlur:()=>{clearTimeout(a.current),s({action:l.updateValue,baseVariableValue:r.current}),a.current=null},onFocus:()=>{},onBeforeChange:n=>{r.current!==n&&(r.current=n,w(B=>{let f={...B};return f.ignoreUpdate=!0,f}),s({action:l.updateImmediateValue,args:{text:n},baseVariableValue:n}),clearTimeout(a.current),a.current=setTimeout(function(){s({action:l.updateValue,baseVariableValue:r.current}),a.current=null},3e3))},paddingBottom:c})},g),t=p;return e.showResults&&e.resultsLocation==="bottom"&&(t=i.jsxs(i.Fragment,{children:[p,o]})),t=i.jsxs("div",{style:{margin:"12px 0"},children:[i.jsx("a",{name:h}),i.jsx("div",{style:{padding:"0",border:"var(--mainBorder)",borderRadius:"var(--mainBorderRadius)",height:d(S),width:d(V),maxWidth:"100%",display:"flex",flexDirection:"column"},id:h,children:t})]}),e.showResults&&(e.resultsLocation==="left"?t=i.jsxs("div",{style:{display:"flex",maxWidth:"100%",margin:"12px 0"},children:[i.jsx("div",{style:{maxWidth:"50%",paddingRight:"15px",boxSizing:"border-box"},children:o}),i.jsx("div",{style:{maxWidth:"50%",boxSizing:"border-box"},children:t})]}):e.resultsLocation==="right"&&(t=i.jsxs("div",{style:{display:"flex",maxWidth:"100%",margin:"12px 0"},children:[i.jsx("div",{style:{maxWidth:"50%",paddingRight:"15px",boxSizing:"border-box"},children:t}),i.jsx("div",{style:{maxWidth:"50%",boxSizing:"border-box"},children:o})]}))),i.jsx(I,{partialVisibility:!0,onChange:z,children:t})});export{X as default};
